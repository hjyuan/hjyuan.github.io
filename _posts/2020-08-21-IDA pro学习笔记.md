---
layout:     post
title:      IDA pro学习笔记
subtitle:   gcc编译
date:       2020-08-21
author:     Jie_Y
header-img: img/post-bg-gcc.jpg
catalog: true
tags:
    - 反编译
    - 二进制
---

# IDA pro学习笔记

## IDA界面

![image-20200821205403427](../../img/IDA/IDA pro-1.png)

1：工具栏

2：概况导航栏

3：标签

4：反汇编视图，空格键在图形视图和列表视图之间切换

esc键用于后退

![IDA pro-2](../../img/IDA/IDA pro-2.png)

绿色箭头代表Yes，红色箭头代表No

![IDA pro-3](../../img/IDA/IDA pro-3.png)

实线箭头表示非条件跳转，虚线箭头代表条件跳转。如果一个跳转(条件或非条件)将控制权转交给某个地址，这时会使用粗线(实线或虚线)。

5：图形概况视图

6：输出窗口

7：函数窗口
```
sub_xxxxxxxx：地址xxxxxxxx处的子例程
loc_xxxxxxxx：地址xxxxxxxx处的一个指令
byte_xxxxxxxx：位置xxxxxxxx处的8位数据
word_xxxxxxxx：位置xxxxxxxx处的16位数据
dword_xxxxxxxx：位置xxxxxxxx处的32位数据
unk_xxxxxxxx：位置xxxxxxxx处的大小未知的数据
```


## IDA分析过程

选定一个文件，IDA首先创建数据库。在这个过程中首先将控制权转交给加载器模块，加载器模块从磁盘加载文件，解析文件头，创建各种包含代码或数据的程序块，最后将控制权返回给特定的代码入口点。
然后反编译引擎将接管控制权，一次传一个地址给处理器模块，确定位于该地址的指令的类型、长度，以及从这个地址继续执行指令的位置。

交叉引用被格式化为一个名称和一个十六进制偏移值。

<font color='red'>调用约定</font>指定调用方放置函数所需参数的具体位置。调用约定可能要求将参数放置在特定的寄存器、程序栈、或者寄存器和栈中。在传递参数时，程序栈还决定被调用函数完成操作后，有谁负责从栈中删除这些参数。

GNU编译器(gcc和g++)利用cdecl调用约定按从右到左的顺序将函数参数放到栈上，完成操作后调用方清除参数。

DLL共享库利用stdcall调用约定将函数参数按从右到左的顺序将参数放到栈上，完成操作后被调用方清除参数。

局部变量位于被保存的返回地址之上，函数参数位于被保存的返回地址之下。局部变量名称以var\_为前缀，后面跟一个表示变量与被保存的帧指针之间距离的十六进制后缀。函数参数名以arg\_为前缀，后面跟一个表示其与最顶端的参数之间的相对距离的十六进制后缀。

> IDA只会为那些在函数中直接引用的栈变量自动生成名称。

文本搜索将搜索限制于仅查找完整的词，并且能够匹配反汇编行中的任何完整的词，包括操作码助记符或常量。



